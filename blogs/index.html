<!DOCTYPE html>
<html>
<head>
  <title>æˆ‘çš„åšå®¢ - ç‰¹æ•ˆç‰ˆ</title>
  <style>
    /* [ä¿æŒä½ åŸæœ‰çš„æ‰€æœ‰CSSæ ·å¼ä¸å˜] */
  </style>
</head>
<body>
  <!-- æ»šåŠ¨è¿›åº¦æ¡ -->
  <div class="scroll-progress" id="scrollProgress"></div>
  
  <!-- ç²’å­èƒŒæ™¯ -->
  <canvas class="particles" id="particles"></canvas>
  
  <h1>æ–‡ç« åˆ—è¡¨</h1>
  
  <div id="posts-container">
    <!-- æ–‡ç« å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½åˆ°è¿™é‡Œ -->
    <div class="post">
      <div class="post-title">åŠ è½½æ–‡ç« ä¸­...</div>
    </div>
  </div>

  <a href="/" class="back-link">â† è¿”å›é¦–é¡µ</a>
  
  <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
  <button class="theme-toggle" id="themeToggle">ğŸŒ“</button>
  
  <script>
    // [ä¿æŒä½ åŸæœ‰çš„æ‰€æœ‰JavaScriptç‰¹æ•ˆä»£ç ]
    
    // æ–°å¢ï¼šä»GitHubåŠ è½½æ–‡ç« åˆ—è¡¨
    async function loadPosts() {
      try {
        const response = await fetch('https://api.github.com/repos/Inlovexy/Inlovexy.github.io/contents/posts');
        const files = await response.json();
        
        const postsContainer = document.getElementById('posts-container');
        postsContainer.innerHTML = '';
        
        // è¿‡æ»¤å¹¶æ’åº.mdæ–‡ä»¶
        const markdownFiles = files
          .filter(file => file.name.endsWith('.md'))
          .sort((a, b) => new Date(b.name.split('-').slice(0, 3).join('-')) - new Date(a.name.split('-').slice(0, 3).join('-')));
        
        // ä¸ºæ¯ç¯‡æ–‡ç« åˆ›å»ºå¡ç‰‡
        for (const file of markdownFiles) {
          const postName = file.name.replace('.md', '');
          const postDate = postName.split('-').slice(0, 3).join('-');
          const postTitle = postName.split('-').slice(3).join(' ');
          
          const postElement = document.createElement('div');
          postElement.className = 'post';
          postElement.innerHTML = `
            <a href="/posts/${postName}.html" class="post-title">${postTitle}</a>
            <div class="post-date">${postDate}</div>
            <p>åŠ è½½å†…å®¹æ‘˜è¦...</p>
          `;
          
          postsContainer.appendChild(postElement);
          
          // å¯é€‰ï¼šåŠ è½½æ¯ç¯‡æ–‡ç« çš„æ‘˜è¦
          loadPostExcerpt(postName, postElement);
        }
        
        // é‡æ–°åˆå§‹åŒ–æ»šåŠ¨åŠ¨ç”»
        setTimeout(checkScroll, 500);
      } catch (error) {
        console.error('åŠ è½½æ–‡ç« å¤±è´¥:', error);
        document.getElementById('posts-container').innerHTML = `
          <div class="post">
            <div class="post-title">åŠ è½½æ–‡ç« å¤±è´¥</div>
            <p>è¯·åˆ·æ–°é¡µé¢æˆ–ç¨åå†è¯•</p>
          </div>
        `;
      }
    }
    
    // åŠ è½½æ–‡ç« æ‘˜è¦
    async function loadPostExcerpt(postName, postElement) {
      try {
        const response = await fetch(`/posts/${postName}.md`);
        const text = await response.text();
        
        // æå–YAML front matterå’Œå†…å®¹
        const content = text.split('---')[2] || text;
        const excerpt = content.trim().split('\n')[0].substring(0, 100) + '...';
        
        postElement.querySelector('p').textContent = excerpt;
      } catch (error) {
        console.error('åŠ è½½æ‘˜è¦å¤±è´¥:', error);
      }
    }
    
    // é¡µé¢åŠ è½½å®Œæˆåè·å–æ–‡ç« åˆ—è¡¨
    document.addEventListener('DOMContentLoaded', () => {
      loadPosts();
      
      // [ä¿æŒä½ åŸæœ‰çš„ç‰¹æ•ˆåˆå§‹åŒ–ä»£ç ]
    });
  </script>
</body>
</html>
