<!DOCTYPE html>
<html>
<head>
  <title>我的博客 - 特效版</title>
  <style>
    /* [保持你原有的所有CSS样式不变] */
  </style>
</head>
<body>
  <!-- 滚动进度条 -->
  <div class="scroll-progress" id="scrollProgress"></div>
  
  <!-- 粒子背景 -->
  <canvas class="particles" id="particles"></canvas>
  
  <h1>文章列表</h1>
  
  <div id="posts-container">
    <!-- 文章将通过JavaScript动态加载到这里 -->
    <div class="post">
      <div class="post-title">加载文章中...</div>
    </div>
  </div>

  <a href="/" class="back-link">← 返回首页</a>
  
  <!-- 主题切换按钮 -->
  <button class="theme-toggle" id="themeToggle">🌓</button>
  
  <script>
    // [保持你原有的所有JavaScript特效代码]
    
    // 新增：从GitHub加载文章列表
    async function loadPosts() {
      try {
        const response = await fetch('https://api.github.com/repos/Inlovexy/Inlovexy.github.io/contents/posts');
        const files = await response.json();
        
        const postsContainer = document.getElementById('posts-container');
        postsContainer.innerHTML = '';
        
        // 过滤并排序.md文件
        const markdownFiles = files
          .filter(file => file.name.endsWith('.md'))
          .sort((a, b) => new Date(b.name.split('-').slice(0, 3).join('-')) - new Date(a.name.split('-').slice(0, 3).join('-')));
        
        // 为每篇文章创建卡片
        for (const file of markdownFiles) {
          const postName = file.name.replace('.md', '');
          const postDate = postName.split('-').slice(0, 3).join('-');
          const postTitle = postName.split('-').slice(3).join(' ');
          
          const postElement = document.createElement('div');
          postElement.className = 'post';
          postElement.innerHTML = `
            <a href="/posts/${postName}.html" class="post-title">${postTitle}</a>
            <div class="post-date">${postDate}</div>
            <p>加载内容摘要...</p>
          `;
          
          postsContainer.appendChild(postElement);
          
          // 可选：加载每篇文章的摘要
          loadPostExcerpt(postName, postElement);
        }
        
        // 重新初始化滚动动画
        setTimeout(checkScroll, 500);
      } catch (error) {
        console.error('加载文章失败:', error);
        document.getElementById('posts-container').innerHTML = `
          <div class="post">
            <div class="post-title">加载文章失败</div>
            <p>请刷新页面或稍后再试</p>
          </div>
        `;
      }
    }
    
    // 加载文章摘要
    async function loadPostExcerpt(postName, postElement) {
      try {
        const response = await fetch(`/posts/${postName}.md`);
        const text = await response.text();
        
        // 提取YAML front matter和内容
        const content = text.split('---')[2] || text;
        const excerpt = content.trim().split('\n')[0].substring(0, 100) + '...';
        
        postElement.querySelector('p').textContent = excerpt;
      } catch (error) {
        console.error('加载摘要失败:', error);
      }
    }
    
    // 页面加载完成后获取文章列表
    document.addEventListener('DOMContentLoaded', () => {
      loadPosts();
      
      // [保持你原有的特效初始化代码]
    });
  </script>
</body>
</html>
